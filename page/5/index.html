<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 5 | hello2dj | if you can&#39;t explain it simply, you don&#39;t understand it well enough</title>

  
  <meta name="author" content="hello2dj (dj_amazing@sina.com)">
  

  
  <meta name="description" content="每个人都是带着棱角来到世上，只有磨平棱角才能走的更远">
  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="hello2dj"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="hello2dj" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">hello2dj</a>
    </h1>
    <p class="site-description">if you can&#39;t explain it simply, you don&#39;t understand it well enough</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">Home</a></li>
      
        <li><a href="/archives">Archives</a></li>
      
        <li><a href="/categories">Categories</a></li>
      
        <li><a href="/tags">Tags</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2018/01/01/four-golden-rules/"><span>better developer之4个黄金规则</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/01/01/four-golden-rules/" rel="bookmark">
        <time class="entry-date published" datetime="2018-01-01T07:58:56.000Z">
          2018-01-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>先上图<br><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1514805637908&amp;di=3ff7d62ca42b81a4c2511d56223d0a81&amp;imgtype=0&amp;src=http%3A%2F%2F365jia.cn%2Fuploads%2Fnews%2Ffolder_220698%2Fimages%2Fa35a7da37632bedf357f6f884f6bbeaf.jpg" alt=""><br>研究如何才能成为一个更好的开发者是每一个开发者的核心。一个好的开发者的表现直接体现在他所生产的代码，你越是一个好的开发者，那么你代码的bug就会越少，并且你的代码更容易阅读以及维护。<br>下面是我所遵守的4条黄金法则</p>
<h4 id="规则1：我的代码像屎一样。"><a href="#规则1：我的代码像屎一样。" class="headerlink" title="规则1：我的代码像屎一样。"></a>规则1：我的代码像屎一样。</h4><p>所有的代码都像屎一样包括我自己的。无论你的代码有多好，总是会有一个更好的实现方式，并且也总是会有人觉得他像屎一样。</p>
<h4 id="规则2：尽管他像屎一样，我依然关心我的代码。"><a href="#规则2：尽管他像屎一样，我依然关心我的代码。" class="headerlink" title="规则2：尽管他像屎一样，我依然关心我的代码。"></a>规则2：尽管他像屎一样，我依然关心我的代码。</h4><p>并不是只有在一开始才要写出好的代码，而是随时都要让你的代码保持更好。没有谁会在第一次就能写出好的代码，好的代码是需要打磨的，就像玉一样。重构应当是你的主要工作之一。</p>
<h4 id="规则3：对于我自己的代码，我自己的观点都是错的。"><a href="#规则3：对于我自己的代码，我自己的观点都是错的。" class="headerlink" title="规则3：对于我自己的代码，我自己的观点都是错的。"></a>规则3：对于我自己的代码，我自己的观点都是错的。</h4><p>对于我们自己的代码，有时候我们过于以自我为中心了，无论这代码有多烂，我们总是会觉得这就是最好的解决方案。绝不要相信自己的观点，应当把你的代码尽可能多的给其他开发者看并听取他们的意见。</p>
<h4 id="规则4：我的经理才不关心我的代码呢，他只是给我发工资而已"><a href="#规则4：我的经理才不关心我的代码呢，他只是给我发工资而已" class="headerlink" title="规则4：我的经理才不关心我的代码呢，他只是给我发工资而已"></a>规则4：我的经理才不关心我的代码呢，他只是给我发工资而已</h4><p>这则规定决定了其他3个，我们总是容易忘记我们是被付了工资来把事情做完的。你的经理也是应该关注代码的，但是他更关注的是把事情以可接受的质量按时做完。因此也不要把过多的时间花在如何让你的代码不那么屎上。关键是要在做完和质量之间做一个平衡或者说是取舍。</p>
<h3 id="一些其他可以帮助你的建议"><a href="#一些其他可以帮助你的建议" class="headerlink" title="一些其他可以帮助你的建议"></a>一些其他可以帮助你的建议</h3><ul>
<li><a href="http://www.makinggoodsoftware.com/2009/08/06/5-tips-to-make-good-code-reviews/" target="_blank" rel="noopener">Code reviews</a></li>
<li><a href="http://www.makinggoodsoftware.com/2009/08/11/for-gods-sake-make-it-easy/" target="_blank" rel="noopener">keep it simple</a></li>
<li><a href="http://www.makinggoodsoftware.com/2009/08/05/how-to-write-good-tests/" target="_blank" rel="noopener">test</a></li>
<li><a href="http://www.makinggoodsoftware.com/2009/05/26/refactoring-the-main-5-questions-why-when-what-how-who/" target="_blank" rel="noopener">refactor</a></li>
<li><a href="http://www.makinggoodsoftware.com/2009/07/07/5-top-non-technical-mistakes-made-by-programmers/" target="_blank" rel="noopener">Non technical factors</a></li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>上面所说的是每一个开发者都曾经历过的事儿，却不是所有开发者都明白的事儿，软件开发不止是个技术活更是个艺术活。需要自然科学的支撑，更需要人文科学陪伴。是这两者的有机结合，才能写出好的代码，才能做一个更好的开发者。建议的五篇文章都值得一读。有时间了在继续写一写。</p>
<p>参考：</p>
<ol>
<li><a href="http://www.makinggoodsoftware.com/" target="_blank" rel="noopener">blog</a></li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/software/">software</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2018/01/01/pyramid-of-code/"><span>代码的金字塔</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/01/01/pyramid-of-code/" rel="bookmark">
        <time class="entry-date published" datetime="2018-01-01T07:09:46.000Z">
          2018-01-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>废话不说先上图<br><img src="http://gooddeveloper.files.wordpress.com/2009/05/pyramid.gif" alt=""></p>
<p>代码的质量可以被看作是上图的金字塔，每个顶点都代表这代码质量的一个特点。但总体来说一共包含两方面，基础和顶点（base and apex）</p>
<p>基础是什么呢？ 基础是那些让我们的代码可靠，可面向未来的特点的集合。而顶点则是代码的功能和可靠性。 你想让你的顶点越高，那么基础就应当越大。</p>
<h3 id="基础包括那些特征呢？"><a href="#基础包括那些特征呢？" class="headerlink" title="基础包括那些特征呢？"></a>基础包括那些特征呢？</h3><p><img src="http://gooddeveloper.files.wordpress.com/2009/05/pyramid_basenames.png" alt=""></p>
<ul>
<li><h4 id="可读性"><a href="#可读性" class="headerlink" title="可读性"></a>可读性</h4><p>这个特征代表了代码是否易于阅读，是否易于理解代码的内容及其目的。他又包括以下几个特征：</p>
<ul>
<li>好的注释，注意不是过多的注释，过多的注释可不是什么好事儿</li>
<li>好的命名无论是类，函数，变量等, 见我的<a href="https://hello2dj.github.io/2018/01/01/naming/" target="_blank" rel="noopener">这篇文章</a></li>
<li>一致的代码规范</li>
<li>干净的逻辑，说白了就是没有废话</li>
</ul>
</li>
<li><h4 id="可扩展性"><a href="#可扩展性" class="headerlink" title="可扩展性"></a>可扩展性</h4><p>这个特征代表了是否易于添加功能(对产品来说做减法的太少，做加法的太多了),好的设计应当具有高扩展性。扩展越高意味添加功能就越轻松，改动也越少。</p>
</li>
<li><h4 id="原子性（低耦合，高内聚）"><a href="#原子性（低耦合，高内聚）" class="headerlink" title="原子性（低耦合，高内聚）"></a>原子性（低耦合，高内聚）</h4><p>这个特征代表了我们的功能模块之间是否低耦合，高内聚，模块内修改不影响其他模块。<br>这里有一些好的原则：</p>
<ul>
<li><a href="https://zh.wikipedia.org/wiki/SOLID_(%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1" target="_blank" rel="noopener">SOLID 原则</a>)<ul>
<li>单一功能原则</li>
<li>开闭原则</li>
<li>里氏替换原则</li>
<li>接口隔离原则</li>
<li>依赖反转原则</li>
</ul>
</li>
<li>DRY</li>
<li>持续重构<h4 id="可测试性"><a href="#可测试性" class="headerlink" title="可测试性"></a>可测试性</h4>这个特征代表了我们的代码覆盖度有多少，我们的自动化程度有多少。还有单元测试，集成测试以及e2e测试的情况。</li>
</ul>
</li>
</ul>
<h3 id="金字塔的顶点"><a href="#金字塔的顶点" class="headerlink" title="金字塔的顶点"></a>金字塔的顶点</h3><p>顶点代表了，我们的代码做了多少事，以及他的可靠程度</p>
<h3 id="保持顶点与基础平衡"><a href="#保持顶点与基础平衡" class="headerlink" title="保持顶点与基础平衡"></a>保持顶点与基础平衡</h3><p>要让我们的基础足够大，整体机构自然就会很好。</p>
<h3 id="那么这个金字塔会有那些形状呢？"><a href="#那么这个金字塔会有那些形状呢？" class="headerlink" title="那么这个金字塔会有那些形状呢？"></a>那么这个金字塔会有那些形状呢？</h3><ul>
<li>代码需要重构，不在是个上小下大的机构了，就是个棍儿了。</li>
<li>所有的都是ok的，完美的金字塔。</li>
<li>底儿太大了，都成了个扁的了，过度设计，只是在浪费资源罢了。</li>
</ul>
<h3 id="那么怎么测量这个金字是否合适呢？"><a href="#那么怎么测量这个金字是否合适呢？" class="headerlink" title="那么怎么测量这个金字是否合适呢？"></a>那么怎么测量这个金字是否合适呢？</h3><p>不幸的是目前还没有什么具体的方法能够测量代码的可测试性，可读性，可扩展性，以及原子性，我们只能靠经验来判断。这是个悲哀。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>无数先贤都在探索怎么才能把软件工程化做的更好，我也希望会做的更好，我也会为此做出努力。可这里隐含着一个问题，就好建筑业，他的工程化很成熟，因此带了无数的建筑工人，拿着微薄的工资，做着最累的工作。希望我们这里没有。</p>
<p>参考：</p>
<ol>
<li><a href="http://www.makinggoodsoftware.com/" target="_blank" rel="noopener">blog</a></li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/software/">software</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2018/01/01/programmers-top-10-sentences/"><span>fuck fuck fuck</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/01/01/programmers-top-10-sentences/" rel="bookmark">
        <time class="entry-date published" datetime="2018-01-01T06:52:57.000Z">
          2018-01-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>看到了一篇列举程序员最常说的10句话</p>
<ul>
<li><h4 id="WTF"><a href="#WTF" class="headerlink" title="WTF!"></a>WTF!</h4></li>
</ul>
<p>code reviews时最常听到的</p>
<p><img src="http://www.makinggoodsoftware.com/wp-content/uploads/2009/09/wtfm.jpg" alt=""></p>
<ul>
<li><h4 id="It-works-in-my-machine-在我这运行的好好的啊！"><a href="#It-works-in-my-machine-在我这运行的好好的啊！" class="headerlink" title="It works in my machine! 在我这运行的好好的啊！"></a>It works in my machine! 在我这运行的好好的啊！</h4><p>当我们因为某一个问题被责怪时…</p>
</li>
<li><h4 id="D’oh"><a href="#D’oh" class="headerlink" title="D’oh!"></a>D’oh!</h4><p>hi boy，你把debug代码从生产环境去掉了么？</p>
</li>
<li><h4 id="It-will-be-ready-tomorrow-明天就可以了"><a href="#It-will-be-ready-tomorrow-明天就可以了" class="headerlink" title="It will be ready tomorrow. 明天就可以了"></a>It will be ready tomorrow. 明天就可以了</h4><p>明日复明日</p>
</li>
<li><h4 id="Have-you-tried-turning-it-off-and-on-again-你有没有尝试过重启一下试试？"><a href="#Have-you-tried-turning-it-off-and-on-again-你有没有尝试过重启一下试试？" class="headerlink" title="Have you tried turning it off and on again? 你有没有尝试过重启一下试试？"></a>Have you tried turning it off and on again? 你有没有尝试过重启一下试试？</h4><p>这是电视的话题，却被It人员搞火了</p>
</li>
<li><h4 id="Why"><a href="#Why" class="headerlink" title="Why?"></a>Why?</h4><p>为什么我们总是在问为什么？</p>
</li>
<li><h4 id="Is-not-a-bug-it’s-a-feature-你懂的他不是bug他还是feature"><a href="#Is-not-a-bug-it’s-a-feature-你懂的他不是bug他还是feature" class="headerlink" title="Is not a bug, it’s a feature. 你懂的他不是bug他还是feature."></a>Is not a bug, it’s a feature. 你懂的他不是bug他还是feature.</h4></li>
</ul>
<p><img src="http://www.makinggoodsoftware.com/wp-content/uploads/2009/09/bug_vs_feature.gif" alt=""></p>
<ul>
<li><h4 id="That-code-is-crap-屎一样的代码。"><a href="#That-code-is-crap-屎一样的代码。" class="headerlink" title="That code is crap. 屎一样的代码。"></a>That code is crap. 屎一样的代码。</h4><p>所有的代码都像屎一样，哦，当然只有我的不是</p>
</li>
<li><h4 id="My-code-is-compiling…"><a href="#My-code-is-compiling…" class="headerlink" title="My code is compiling…"></a>My code is compiling…</h4><p>快来干活，我的代码在编译呢。。好吧，加油</p>
</li>
<li><h4 id="No-I-don’t-know-how-to-fix-the-microwave。这句话我想改一下就是，不，我不会修电脑。"><a href="#No-I-don’t-know-how-to-fix-the-microwave。这句话我想改一下就是，不，我不会修电脑。" class="headerlink" title="No, I don’t know how to fix the microwave。这句话我想改一下就是，不，我不会修电脑。"></a>No, I don’t know how to fix the microwave。这句话我想改一下就是，不，我不会修电脑。</h4></li>
</ul>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这里有的是实话，有的是玩笑话，有的自嘲话，可这些话是不是值得我们反思呢？</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/software/">software</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2018/01/01/naming/"><span>software啊！你的命名为何这么难</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2018/01/01/naming/" rel="bookmark">
        <time class="entry-date published" datetime="2018-01-01T04:25:35.000Z">
          2018-01-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h3 id="软件是如此的复杂之命名-我们只谈语义问题不谈逻辑问题"><a href="#软件是如此的复杂之命名-我们只谈语义问题不谈逻辑问题" class="headerlink" title="软件是如此的复杂之命名(我们只谈语义问题不谈逻辑问题)"></a>软件是如此的复杂之命名(我们只谈语义问题不谈逻辑问题)</h3><p>让机器懂的代码很简单，让人懂的代码就很难了。 其实代码也是在写作（虽然也大不相同），我现在发现能将自然科学和人文科学完美结合的就是计算机科学了。因为一段正确的代码需要正确的算法逻辑甚至是数学证明，事实上计算机科学发展的基础就是数。可是代码追求的不仅仅是正确，还得是可维护的，就是说是人可以读懂的。那么这时候就要看你的英语功底了，其实也不尽然，但是良好英语功底得是有的，只要你想写出大家可以看懂的代码（此处省略一万字别较真…）。<br>关于代码写作，大部分不是在写完整的句子，反而大部分是在写短语，是在给事物进行命名处理。而是否写的好，这里有两方面的问题：</p>
<ol>
<li>大家的英语都是very good, 但这里有个问题, 就是这段代码里的命名是否真正的体现了代码的核心含义就很重要了。举个简单栗子, 在一个业务场景中有这样一个问题 ‘If your customer just considers “order” an “order” that has been approved, don’t call “order” to a non approved one in your code, call it “nonApprovedOrder”’ 翻译一下就是你的客户只会‘订购’那些被批准了的‘订单’，那么你在一段代码里出现了order这个变量，此时就会很模糊了，模糊的关键就在于order到底是被批准了，还是未批准呢？可能你会说order对象有个属性来表示是否批准了。当然这是可以的，但若是我直接使用nonApprovedOrder是否会更清晰呢！这里只是举个简单例子，也并不代表一定得这样，其实order下的属性判断我觉得也是可以的，这里只是为了说明一个问题，能让人一目了然的命名才是更合适的。</li>
<li>对于非英语母语的半吊子英语的人来说，用对词语就很关键了。但对像我这种半吊子的人来说这里除了用对以外还有一个不可谓不重要的陷阱，那就是关于大家所学英语的共识。比如我知道一个单词a,并且我认为他的意思就是a,可是若是对另一个人来说他所认识的a代表的是b，那此时对于这个变量a,双发就会产生歧义了，甚至会惹得其他人说这是什么意思，怎么可以这么用。我举这个栗子就是要说明，一个公司最好有自己的命名规范甚至是自己的业务词语汇总。能减少不必要的麻烦。</li>
</ol>
<p>看了上面两个问题就会发现，你写了一个正确代码，但却不一定写得出可读的代码。接下给大家看一些关于命名原则</p>
<ol>
<li>变量的名字尽可能的具有具体的意义，而不是过于泛化</li>
</ol>
<p>好的栗子：daysDateRange, flightNumber, carColor<br>坏的栗子：days,dRange,temp,data, aux</p>
<blockquote>
<p>关于这个原则，是视具体环境而变化的，比如data这个命名，有的时候我需要的就是data啊，越往底层走就越会出现像data这种抽象的命名，越往业务逻辑层走就越会出现像carColor这种具体的命名</p>
</blockquote>
<ol start="2">
<li>尽量短一些（毕竟我们不是在写以字数多就是好的文章）</li>
</ol>
<p>坏的栗子：howLonDoesItTakeToOpenTheDoor, howBigIsTheMaterial…<br>好的栗子：timeToOpenTheDoor, MaterialSize</p>
<ol start="3">
<li><p>用缩写没问题，关键得有注释，或者是大家都知道的通用缩写</p>
</li>
<li><p>在需要的时候适当使用<a href="https://zh.wikipedia.org/wiki/%E5%8C%88%E7%89%99%E5%88%A9%E5%91%BD%E5%90%8D%E6%B3%95" target="_blank" rel="noopener">匈牙利标记法</a>。<br>举个栗子： 你需要根据苹果的颜色来区分是否成熟 你可这么来命名<br>red_apples, yellow_apples …</p>
<blockquote>
<p>这条待定</p>
</blockquote>
</li>
<li><p>保持一致性<br>如果采用驼峰式就都使用驼峰式</p>
</li>
<li><p>把业务领域的术语对应到你所熟知的命名上去<br>栗子： If your customer just considers “order” an “order” that has been approved, don’t call “order” to a non approved one in your code, call it “nonApprovedOrder” 同上</p>
</li>
<li><p>黄金条例： 花一些时间再命名上（我觉得这条是最靠谱的，我也要贯彻执行）<br>当你近乎不加思索的使用一个变量命名的时候，你基本上就已经选择了一个不好的命名。<br>反之，你总是在向着好的命名前进</p>
</li>
</ol>
<h3 id="那怎么判断我们的命名是合适呢？当我们的命名ok时代码应当呈现以下几个特征"><a href="#那怎么判断我们的命名是合适呢？当我们的命名ok时代码应当呈现以下几个特征" class="headerlink" title="那怎么判断我们的命名是合适呢？当我们的命名ok时代码应当呈现以下几个特征"></a>那怎么判断我们的命名是合适呢？当我们的命名ok时代码应当呈现以下几个特征</h3><ul>
<li>easy to read</li>
<li>easy to use</li>
<li>it looks simple</li>
<li>lean</li>
<li>is straight forward<br>但这并不代表我们有了好的命名就会写出可读的代码，好的命名只是我们写出可读的代码的第一步，但若是第一步都迈不出去，那可就惨了。。。</li>
</ul>
<h3 id="当然一次性就改好了是在太困难了，那我们以前的旧代码怎么办？"><a href="#当然一次性就改好了是在太困难了，那我们以前的旧代码怎么办？" class="headerlink" title="当然一次性就改好了是在太困难了，那我们以前的旧代码怎么办？"></a>当然一次性就改好了是在太困难了，那我们以前的旧代码怎么办？</h3><p>一句话对我们的代码持续性重构，以及持续性的测试。因此我们需要大量的测试用例，是的，测试用例。</p>
<h3 id="最后一个真的是太重要了。"><a href="#最后一个真的是太重要了。" class="headerlink" title="最后一个真的是太重要了。"></a>最后一个真的是太重要了。</h3><p>参考：<br><a href="http://www.makinggoodsoftware.com/" target="_blank" rel="noopener">blog</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/software/">software</a><a href="/tags/naming/">naming</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/12/13/typescript的声明文件/"><span>typescript的声明文件</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/12/13/typescript的声明文件/" rel="bookmark">
        <time class="entry-date published" datetime="2017-12-13T13:58:58.000Z">
          2017-12-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <img src="/2017/12/13/typescript的声明文件/ts.png" title="开篇一图">
<h3 id="开篇扯淡"><a href="#开篇扯淡" class="headerlink" title="开篇扯淡"></a>开篇扯淡</h3><p>上次我们谈论协变和逆变时提到了 typescript, ts 本身是 js 的超集，从名字就可以看出来 ts 为 js 带来了类型，那么如何能写好 typescript？答案是从声明文件开始，若是能写的一手好的 ts 的声明文件，那 ts 的书写必然是手到擒来啊！2333333（我们就不在这里再做 ts 的基本语法的普及了详见<a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="noopener">handbook</a>）</p>
<h3 id="为什么要有声明文件呢？ts-的声明文件又是什么呢（是以-d-ts-结尾的文件）？"><a href="#为什么要有声明文件呢？ts-的声明文件又是什么呢（是以-d-ts-结尾的文件）？" class="headerlink" title="为什么要有声明文件呢？ts 的声明文件又是什么呢（是以.d.ts 结尾的文件）？"></a>为什么要有声明文件呢？ts 的声明文件又是什么呢（是以.d.ts 结尾的文件）？</h3><p>为什么？我们知道 ts 是 js 的超集也是会编译成 js 的，那么已有的 js 代码怎么和现有的 ts 项目融合呢（即在 ts 中引用 js）？因为 js 是弱类型的，是无法推导出变量的类型的，那么 ts 的编译器自然就无法集成 js 的代码了？此时声明文件就起到作用了，声明文件的目的就是告诉 ts 的编译器，我要引用 js 文件了，js 文件的内容有啥，暴露出来的变量叫啥，类型是啥等等，听着怎么那么像是 C/C++的头文件呢？ts 是强类型语言了，每个变量就都会有自己的类型(类型是不可变得哦)，这些类型都是要声明的，还有接口也是要声明的，而 js 代码是没有这些的，所以就需要声明文件了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 1</span><br><span class="line">interface Dog &#123;</span><br><span class="line">  bark: (world: string) =&gt; void;</span><br><span class="line">&#125;</span><br><span class="line">const tuDog: Dog = &#123;</span><br><span class="line">  bark: (world: string) &#123;</span><br><span class="line">    console.log(&apos;bark&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 2</span><br><span class="line">interface TextSpan &#123;</span><br><span class="line">    start: number;</span><br><span class="line">    end: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 3</span><br><span class="line">type Test = (version: number) =&gt; void;</span><br></pre></td></tr></table></figure>
<p>上面的代码我们定义了两个接口类型，和一个 Test 的函数类型，当我们把这些类型定义都放到一个文件里时就成了一个‘声明文件’了，这里打引号的意思是，正常 ts 之间引用是不用专门抽出来写一成一个文件的(当然你要是乐意那也是可以的)，这个例子就是在说声明文件就是一堆’类型声明‘(这里打引号是因为正式的声明文件里也是会声明变量的)，就好比的 C/C++的头文件</p>
<h3 id="举个简单的栗子"><a href="#举个简单的栗子" class="headerlink" title="举个简单的栗子"></a>举个简单的栗子</h3><ol>
<li>新建一个 foo.js</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// foo.js</span><br><span class="line">module.exports.say = require(&apos;./say&apos;);</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>新建一个 say.js</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// say.js 我们在此假设 o 是string</span><br><span class="line">module.exports = function say(o) &#123;</span><br><span class="line">  return o;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>在新建一个 index.ts</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// index.ts</span><br><span class="line">import * as a from &apos;../foo&apos;;  //此时是会报错的，因为没有foo.ts</span><br><span class="line">a.say(&apos;123&apos;)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>此时编译 index.ts 是无法通过的, 因为没有 foo.ts</li>
<li>再新建一个 foo.d.ts 文件(需同名，这样 tsc–typescript 的编译器在加载时就会去找相应文件)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 但若是 再加一个foo.d.ts文件</span><br><span class="line">export function say(o: string): string;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>此时再编译就会通过了，而且若是调用穿得参数不是 string，也是不会通过的</li>
</ol>
<h3 id="上面是通过包的形式引入的-那么全局方式引入的又该如何呢？答案是-declare"><a href="#上面是通过包的形式引入的-那么全局方式引入的又该如何呢？答案是-declare" class="headerlink" title="上面是通过包的形式引入的,那么全局方式引入的又该如何呢？答案是 declare"></a>上面是通过包的形式引入的,那么全局方式引入的又该如何呢？答案是 declare</h3><ol>
<li>新建一个 foo.js</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// foo.js 我们在此假设 o 是string</span><br><span class="line">global.say = function(o) &#123;</span><br><span class="line">  return o;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在新建一个 index.ts</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// index.ts</span><br><span class="line">import * as a from &apos;../foo&apos;;  //此时是会报错的，因为没有foo.ts, 并且也没有bark</span><br><span class="line">bark(&apos;123&apos;)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>此时编译 index.ts 是无法通过的, 因为没有 foo.ts</li>
<li>再新建一个 foo.d.ts 文件(需同名，这样 tsc–typescript 的编译器在加载时就会去找相应文件)</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// 但若是 再加一个foo.d.ts文件</span><br><span class="line">delcare function say(o: string): string;</span><br><span class="line">// delcare var say: (o: string) =&gt; string;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>成功 ok</li>
</ol>
<h3 id="通过上面我们可以看出需要通过包引入的我们使用-export-通过全局似的就可以使用-declare"><a href="#通过上面我们可以看出需要通过包引入的我们使用-export-通过全局似的就可以使用-declare" class="headerlink" title="通过上面我们可以看出需要通过包引入的我们使用 export, 通过全局似的就可以使用 declare"></a>通过上面我们可以看出需要通过包引入的我们使用 export, 通过全局似的就可以使用 declare</h3><h3 id="declare-的正式说明参见typescript-spec"><a href="#declare-的正式说明参见typescript-spec" class="headerlink" title="declare 的正式说明参见typescript spec"></a>declare 的正式说明参见<a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#12-ambients" target="_blank" rel="noopener">typescript spec</a></h3><p>总的来说就是 declare 使声明引用那些已经在代码执行环境中存在的 变量，函数，类，枚举，命名空间，或者 modules, 例如通过 script 标签引入的包。在 declare 命名空间和 modules 时应注意，只能在顶层是使用 declare, 命名空间内部是不允许使用的，命名空间内部的可访问情况可由 export 控制（想让谁可访问就 export 谁）</p>
<h3 id="有很多的库都有相应的-ts-声明文件，那么怎么安装呢？"><a href="#有很多的库都有相应的-ts-声明文件，那么怎么安装呢？" class="headerlink" title="有很多的库都有相应的 ts 声明文件，那么怎么安装呢？"></a>有很多的库都有相应的 ts 声明文件，那么怎么安装呢？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev @types/node(package-name)</span><br></pre></td></tr></table></figure>
<p>可以在这里<a href="http://definitelytyped.org/" target="_blank" rel="noopener">搜索.d.ts</a></p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>当然这里仅仅是简单的做了介绍，通过这个简单的介绍我们可以发现，当我们把声明文件写的完整的时候，基本就是 ts 出师的时候了。(举的栗子是两种分开的，那么在我的 node 项目的某个文件中既有 global 形式又有包的导出形式该怎么做呢？我还没写对，有待努力！各位看官要是知道的话忘不吝赐教（<a href="mailto:dj_amazing@sina.com" target="_blank" rel="noopener">dj_amazing@sina.com</a>）)</p>
<h3 id="在声明文件中-export"><a href="#在声明文件中-export" class="headerlink" title="在声明文件中 export **"></a>在声明文件中 export **</h3><ul>
<li>和declare的差不多，import {export的， declare的 } from ‘’; 都可以被导出， 但是若是使用了 export = something, 那么就只有somethine会被导出了<h3 id="declare-namespace看做是内部模"><a href="#declare-namespace看做是内部模" class="headerlink" title="declare namespace看做是内部模"></a>declare namespace看做是内部模</h3>块即可，不可作为类型，以及值，只是用来分隔代码</li>
</ul>
<h3 id="conditional-type-中可以使用-infer-关键字，常规的类型定义中不能使用"><a href="#conditional-type-中可以使用-infer-关键字，常规的类型定义中不能使用" class="headerlink" title="conditional type 中可以使用 infer 关键字，常规的类型定义中不能使用"></a>conditional type 中可以使用 infer 关键字，常规的类型定义中不能使用</h3><p>推到出 函数返回值类型<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type ReturnType&lt;T&gt; = T extends (...args: any[]) =&gt; infer R ? R : any;</span><br></pre></td></tr></table></figure></p>
<p>普通类型定义 使用infer会报错<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type ReturnType&lt;T extends (...args: any[]) =&gt; infer R&gt; = R;  // Error, not supported</span><br></pre></td></tr></table></figure></p>
<p>参考：</p>
<ol>
<li><p><a href="https://www.typescriptlang.org/docs/handbook/basic-types.html" target="_blank" rel="noopener">handbook</a></p>
</li>
<li><p><a href="https://github.com/TypeStrong/learn-typescript" target="_blank" rel="noopener">learn-ts</a></p>
</li>
<li><p><a href="https://github.com/DefinitelyTyped" target="_blank" rel="noopener">DefinitelyTyped</a></p>
</li>
</ol>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/typescript/">typescript</a>
    </span>
    

    </div>

    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2017/12/12/slide/"><span>说一个slide的实现方式</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/12/12/slide/" rel="bookmark">
        <time class="entry-date published" datetime="2017-12-12T14:44:35.000Z">
          2017-12-12
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <img src="/2017/12/12/slide/slide.png" title="我的第一幅画">
<blockquote>
<p>画画有点儿难啊！</p>
</blockquote>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/slide/">slide</a><a href="/tags/web/">web</a>
    </span>
    

    </div>

    
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/4/" class="pagination-prev">Prev</a>
  
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 hello2dj (dj_amazing@sina.com)
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>